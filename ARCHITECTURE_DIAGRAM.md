# ğŸ¬ Persona Video Pipeline - Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FRONTEND (Next.js)                                â”‚
â”‚                      http://localhost:3000/persona                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PersonaVideoGenerator Component                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚  â”‚
â”‚  â”‚  â”‚   MKBHD      â”‚  â”‚  iJustine    â”‚  â† Persona Selector             â”‚  â”‚
â”‚  â”‚  â”‚ Professional â”‚  â”‚  Energetic   â”‚                                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚  Prompt: "Explain M4 Mac Mini..."       â”‚  â† Text Input          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚  [Generate Video] Button                â”‚  â† Trigger            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚  â³ Generating... (3-7 minutes)         â”‚  â† Progress            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚  <video src={videoUrl} controls />      â”‚  â† Result             â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚                           â†“ HTTP POST                                       â”‚
â”‚                                                                             â”‚
â”‚  generatePersonaVideo({                                                     â”‚
â”‚    prompt: "...",                                                           â”‚
â”‚    persona: "mkbhd" | "ijustine"                                           â”‚
â”‚  })                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND API (FastAPI)                                  â”‚
â”‚                      http://localhost:8000/api                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  POST /generate/persona-video                                               â”‚
â”‚                                                                             â”‚
â”‚  Request: { prompt, persona, temperature, max_tokens }                     â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  1. Asset Mapping                                                      â”‚ â”‚
â”‚  â”‚     â”œâ”€ mkbhd    â†’ mkbhd.wav + mkbhd2.jpg                             â”‚ â”‚
â”‚  â”‚     â””â”€ ijustine â†’ reference_voice.wav + mkbhd2.jpg (fallback)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â†“                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STAGE 1: SCRIPT GENERATION (Gemini)                                  â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  if persona == "mkbhd":                                                â”‚ â”‚
â”‚  â”‚    gemini.generate_mkbhd_script(prompt)                               â”‚ â”‚
â”‚  â”‚      â†’ Style: Professional, measured                                   â”‚ â”‚
â”‚  â”‚      â†’ Pauses: 0.4-0.5s (deliberate)                                  â”‚ â”‚
â”‚  â”‚      â†’ Emphasis: Selective (1-2 words)                                â”‚ â”‚
â”‚  â”‚      â†’ Temperature: 0.6                                                â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  else if persona == "ijustine":                                        â”‚ â”‚
â”‚  â”‚    gemini.generate_ijustine_script(prompt)                            â”‚ â”‚
â”‚  â”‚      â†’ Style: Energetic, enthusiastic                                 â”‚ â”‚
â”‚  â”‚      â†’ Pauses: 0.2-0.3s (quick)                                       â”‚ â”‚
â”‚  â”‚      â†’ Emphasis: Frequent (2-4 words)                                 â”‚ â”‚
â”‚  â”‚      â†’ Temperature: 0.8                                                â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  Output:                                                               â”‚ â”‚
â”‚  â”‚    â”œâ”€ script_text: "So, this new M4 Mac Mini..."                      â”‚ â”‚
â”‚  â”‚    â””â”€ script_intent: ScriptIntent {                                   â”‚ â”‚
â”‚  â”‚          segments: [                                                   â”‚ â”‚
â”‚  â”‚            {text: "So,", intent_type: "pause", intensity: 0.0},       â”‚ â”‚
â”‚  â”‚            {text: "this new M4", intent_type: "emphasis", ...},       â”‚ â”‚
â”‚  â”‚          ]                                                             â”‚ â”‚
â”‚  â”‚       }                                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â†“                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STAGE 2: AUDIO SYNTHESIS (XTTS)                                      â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  xtts.synthesize_with_intent(                                          â”‚ â”‚
â”‚  â”‚    script_intent,                                                      â”‚ â”‚
â”‚  â”‚    reference_audio,                                                    â”‚ â”‚
â”‚  â”‚    speed = 1.0 (mkbhd) / 1.05 (ijustine)                             â”‚ â”‚
â”‚  â”‚  )                                                                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  Process:                                                              â”‚ â”‚
â”‚  â”‚    1. Parse intent markers from script                                â”‚ â”‚
â”‚  â”‚    2. Synthesize audio with voice cloning                             â”‚ â”‚
â”‚  â”‚    3. Create frame-by-frame intent timing map                         â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  Output:                                                               â”‚ â”‚
â”‚  â”‚    â”œâ”€ audio_path: outputs/audio/persona_{uuid}/output.wav            â”‚ â”‚
â”‚  â”‚    â””â”€ timing_map: IntentTimingMap {                                   â”‚ â”‚
â”‚  â”‚          frame_intents: [0.0, 0.0, 0.5, 1.0, 0.8, 0.5, ...],         â”‚ â”‚
â”‚  â”‚          total_duration: 2.5s,                                        â”‚ â”‚
â”‚  â”‚          num_frames: 62 @ 25fps                                       â”‚ â”‚
â”‚  â”‚       }                                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â†“                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STAGE 3: VIDEO GENERATION (SadTalker + Motion Governor)              â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  sadtalker.generate(                                                   â”‚ â”‚
â”‚  â”‚    audio_path,                                                         â”‚ â”‚
â”‚  â”‚    reference_image,                                                    â”‚ â”‚
â”‚  â”‚    intent_timing_map = timing_map,                                    â”‚ â”‚
â”‚  â”‚    enable_motion_governor = True,                                     â”‚ â”‚
â”‚  â”‚    enhancer = "gfpgan"                                                â”‚ â”‚
â”‚  â”‚  )                                                                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  Sub-stages:                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  3a. Generate 3DMM Coefficients (SadTalker)                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ Audio features â†’ Motion proposals                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ Expression coefficients (64 dims)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ Pose angles (3 dims: yaw, pitch, roll)                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â””â”€ Output: Raw 3DMM coefficients (70-73 dims for compact)  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                            â†“                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  3b. Apply Motion Governor (Intent Fusion)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Detect model type:                                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    IS_COMPACT_MODEL = (dims < 200)                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  If COMPACT (70-73 dims):                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Latent coefficients (renderer-sensitive)                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Scale intent to subtle range: 70-100%                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ intent_subtle = 0.7 + (intent * 0.25)                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ coeff_out = coeff_3dmm * intent_subtle                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Else FULL 3DMM (224-257 dims):                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Extract expression + pose coefficients                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Refine expressions (clamp outliers)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â”œâ”€ Smooth pose angles                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â””â”€ Reconstruct full coefficients                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Intent Effects:                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Pause (0.0)    â†’ 70% motion (calmer)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Neutral (0.5)  â†’ 82.5% motion (baseline)                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚    â€¢ Emphasis (1.0) â†’ 100% motion (expressive)                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Output: Refined 3DMM coefficients                               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                            â†“                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  3c. Render Video (SadTalker + GFPGAN)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ 3DMM â†’ Face mesh animation                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ Apply reference image texture                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ Generate video frames                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€ Enhance face details (GFPGAN)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚      â””â”€ Output: Final MP4 video                                 â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  Output: outputs/video/persona_{uuid}.mp4                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  Response: {                                                                â”‚
â”‚    text: "Generated script...",                                            â”‚
â”‚    audio_url: "http://localhost:8000/outputs/audio/...",                  â”‚
â”‚    video_url: "http://localhost:8000/outputs/video/...",                  â”‚
â”‚    processing_time: 187.5                                                  â”‚
â”‚  }                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FRONTEND DISPLAY                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Video Player                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  â–¶  [====================]  0:12 / 0:25                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚                                     â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚      Talking Head Video            â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚   (MKBHD or iJustine style)       â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚                                     â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚   â€¢ Natural lip sync               â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚   â€¢ Intent-aware motion            â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚   â€¢ GFPGAN face enhancement        â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â”‚                                     â”‚                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  [Download Video]  [Generate Another]                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  Processing time: 187.5s (3 minutes 7 seconds)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

KEY FEATURES:

âœ… Persona-Specific Styles
   â”œâ”€ MKBHD: Professional, measured, deliberate pauses
   â””â”€ iJustine: Energetic, enthusiastic, frequent emphasis

âœ… Intent-Aware Motion
   â”œâ”€ Pauses â†’ Reduced motion (70% baseline)
   â”œâ”€ Neutral â†’ Normal motion (82.5%)
   â””â”€ Emphasis â†’ Enhanced motion (100%)

âœ… Renderer-Safe Processing
   â”œâ”€ Compact models: Scalar gating only
   â””â”€ Full 3DMM: Expression + pose refinement

âœ… Face Enhancement
   â””â”€ GFPGAN improves facial details, reduces artifacts

âœ… End-to-End Integration
   â””â”€ Frontend â†’ Backend â†’ AI Pipeline â†’ Video Output

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TECHNOLOGY STACK:

Frontend:
  â€¢ Next.js 14 (React framework)
  â€¢ TypeScript (type safety)
  â€¢ Tailwind CSS (styling)
  â€¢ Axios (API client)

Backend:
  â€¢ FastAPI (Python web framework)
  â€¢ Uvicorn (ASGI server)
  â€¢ Pydantic (validation)

AI Models:
  â€¢ Gemini 2.0-flash-exp (script generation)
  â€¢ XTTS v2 (voice synthesis)
  â€¢ SadTalker (video generation)
  â€¢ Motion Governor (intent fusion)
  â€¢ GFPGAN (face enhancement)

Infrastructure:
  â€¢ WSL2 Ubuntu 22.04
  â€¢ CUDA 12.1
  â€¢ PyTorch 2.5.1+cu121
  â€¢ RTX 4080 SUPER (GPU)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROCESSING TIMELINE:

â”‚ 0s      â”‚ User clicks "Generate Video"
â”‚ 0.1s    â”‚ Frontend sends POST request
â”‚ 0.2s    â”‚ Backend validates request
â”‚ 0.3s    â”‚ â”€â”€â”€â”€â”€â”€â”€ STAGE 1: GEMINI â”€â”€â”€â”€â”€â”€â”€
â”‚ 5-15s   â”‚ Script generation with intent
â”‚         â”‚ â”€â”€â”€â”€â”€â”€â”€ STAGE 2: XTTS â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ 30-60s  â”‚ Audio synthesis + timing map
â”‚         â”‚ â”€â”€â”€â”€â”€â”€â”€ STAGE 3: SADTALKER â”€â”€â”€â”€
â”‚ 30s     â”‚ 3a. Generate coefficients
â”‚ 10s     â”‚ 3b. Apply motion governor
â”‚ 2-4min  â”‚ 3c. Render video + GFPGAN
â”‚ 3-7min  â”‚ Total processing complete
â”‚         â”‚ Backend returns video URL
â”‚         â”‚ Frontend displays video player
â”‚         â”‚ âœ… User watches result

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
